/*!CK:2476422367!*//*1456280704,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["7coLQ"]); }

__d('StickerContextualDialog.react',['ContextualLayerAutoFlipHorizontal','MercuryConfig','ReactAbstractContextualDialog','ReactLayer','cx'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=7,n=k.createClass(j.createSpec({addedBehaviors:[h],displayName:'StickerXUIContextualDialog',theme:{wrapperClassName:"_53ii",arrowDimensions:{offset:m,length:16}}}));n.WIDTH={NORMAL:312,WIDE:400};f.exports=n;},null);
__d('ChatStickerButton.react',['BootloadedComponent.react','JSResource','Link.react','ReactComponentWithPureRenderMixin','React','ReactLayeredComponentMixin','StickerActions','StickerContextualDialog.react','StickerStateStore','StoreAndPropBasedStateMixin','XUISpinner.react','cx','emptyFunction','fbt','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){'use strict';if(c.__markCompiled)c.__markCompiled();var w=l.PropTypes,x=278,y=l.createClass({displayName:'ChatStickerButton',_clickGuard:false,mixins:[k,m,q(p)],propTypes:{className:w.string,ContextualDialogClass:w.func.isRequired,disabled:w.bool,flyoutClassName:w.string,flyoutWidth:w.number,getInput:w.func,onLoad:w.func,onStickerSelect:w.func.isRequired,onEmoticonSelect:w.func.isRequired,onFlyoutShown:w.func,onFlyoutHidden:w.func,threadID:w.string},statics:{calculateState:function(z){var aa=p.getState();return {shown:aa.showTray&&z.threadID===aa.threadID};}},getDefaultProps:function(){return {ContextualDialogClass:o,disabled:false,flyoutWidth:x,onStickerSelect:t,onEmoticonSelect:t};},componentDidMount:function(){this.props.onLoad&&this.props.onLoad(this);},componentWillUnmount:function(){if(this.state.shown)this._hideFlyout();},render:function(){return (l.createElement(j,{className:v(this.props.className,this.state.shown?"open":''),href:'#',onClick:this.showFlyout,onMouseDown:this._prepareForClick,role:'button',title:u._("Choose a sticker or emoticon"),ref:'link'}));},renderLayers:function(){var z=this.props.ContextualDialogClass;return {contextualDialog:l.createElement(z,{alignment:this.props.flyoutAlignment,className:"_5e-r",contextRef:function(){return this.refs.link;}.bind(this),onBeforeHide:this._handleBeforeHide,onBlur:this._hideFlyout,position:'above',shown:this.state.shown,width:this.props.flyoutWidth},l.createElement(h,{bootloadPlaceholder:l.createElement('div',{style:{padding:'30px',textAlign:'center'}},l.createElement(r,{size:'large'})),bootloadLoader:i('StickersFlyout.react'),className:this.props.flyoutClassName,onShown:function(aa){if(this.props.onFlyoutShown)this.props.onFlyoutShown(aa);}.bind(this),onHidden:function(){if(this.props.onFlyoutHidden)this.props.onFlyoutHidden();}.bind(this),onEscKeyDown:this._hideFlyout,onStickerSelect:this._handleStickerSelected,onEmoticonSelect:this._handleEmoticonSelected,shown:this.state.shown}))};},_prepareForClick:function(){this._clickGuard=this.state.shown;},showFlyout:function(z){z&&z.stopPropagation();if(this._clickGuard||this.props.disabled){this._clickGuard=false;return;}n.showStickerTray(this.props.threadID);},_handleBeforeHide:function(){if(this.state.shown){this._hideFlyout();return false;}},_hideFlyout:function(){var z=this.props.getInput&&this.props.getInput();z&&z.focus&&z.focus();n.hideStickerTray();},_handleStickerSelected:function(z){this.props.onStickerSelect(z);},_handleEmoticonSelected:function(z){this._hideFlyout();this.props.onEmoticonSelect(z);}});f.exports=y;},null);