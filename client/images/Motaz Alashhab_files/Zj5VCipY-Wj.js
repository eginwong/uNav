/*!CK:717182630!*//*1456118360,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["t39ay"]); }

__d("TrendingEvent",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={TAG_IMPRESSION:"tag_impression",TAG_FEED_LOAD:"tag_feed_load",TAG_FEED_LONG_VIEW:"tag_feed_long_view",TAG_HIDE:"tag_hide",TOPIC_HEADER_TAPPED:"topic_header_tapped",HOVERCARD_LOAD:"hovercard_load",HOVERCARD_UNLOAD:"hovercard_unload",HOVERCARD_ARTICLE_CLICK:"hovercard_article_click",HOVERCARD_FEED_CLICK:"hovercard_feed_click",HOVERCARD_CONTEXT_CLICK:"hovercard_context_click",OBJECT_CLICK:"object_click",OBJECT_OUTBOUND_CLICK:"object_outbound_click",OBJECT_LIKE:"object_like",OBJECT_COMMENT:"object_comment",OBJECT_SHARE:"object_share",OBJECT_PAGE_LIKE:"object_page_like",OBJECT_FOLLOW:"object_follow",OBJECT_HIDE:"object_hide",PAGINATE:"paginate",TOPIC_SHARE:"topic_share",CATEGORY_HEADER_CLICKED:"category_header_clicked",HOVERCARD_VIDEO_PLAYED:"hovercard_video_played",CLICK_TAG_IMPRESSION:"click_tag_impression"};},null);
__d("TrendingLocation",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={FBFEED_TOPIC_PIVOT:"ftp",FBFEED_TRENDING_TOPIC_PIVOT:"fttp",IOS_TRENDING_DASHBOARD_IN_BOOKMARK:"ios_trending_dashboard_in_bookmark",IOS_TRENDING_INTERSTITIAL:"ios_trending_interstitial",MSITE_PERMALINK:"mp",MSITE_QP:"mq",MSITE_HASHTAG_REDIRECTION:"mhr",MSITE_CARD_PIVOT:"mcp",MSITE_FEED_TOPIC_PIVOT:"mftp",MSITE_FEED_TRENDING_TOPIC_PIVOT:"mfttp",MSITE_NEWS_DASHBOARD:"mnd",MSITE_NEWS_MODULE:"mnm",MSITE_LIVE_EVENT:"mle",MSITE_PAGE_REDIRECTION:"mpr",MSITE_RELATED_TOPICS:"mrt",MSITE_ADS:"ma",MSITE_SEARCH_SPORT_MATCH_MODULE:"mssmm",WEB_FEED_TOPIC_PIVOT:"wftp",WEB_FEED_TRENDING_TOPIC_PIVOT:"wfttp",OLD_FEED_TOPIC_PIVOT:"oftp",OLD_FEED_TRENDING_TOPIC_PIVOT:"ofttp",WWW_PERMALINK:"wp",WWW_QP:"wq",WWW_HASHTAG_REDIRECTION:"whr",WWW_HIDDEN_RHC_TRENDING:"whrt",WWW_HOME_FEED_RHC_TRENDING:"whfrt",WWW_HOME_FEED_RHC_TRENDING_PLACES:"whfrtp",WWW_POST_LIKE_TOPIC_CHAINING:"wpltc",WWW_TOPIC_FEED_RHC_TRENDING:"wtfrt",WWW_POST_SEARCH_RHC_TRENDING:"wpsrt",WWW_PAGE_FEED_RHC_TRENDING:"wpfrt",WWW_BROWSE_RHC_TRENDING:"wbrt",WWW_BROWSE_LATEST_POSTS_TAB:"wblpt",WWW_WORLDCUP_RHC_TRENDING:"wwcrt",WWW_LIVE_EVENT:"wle",WWW_PAGE_REDIRECTION:"wpr",WWW_ADS:"wa",WWW_SEARCH_SPORT_MATCH_MODULE:"wssmm",WWW_NEWS:"wnews",UNKNOWN:"unknown",FBFEED_SENTIMENT_UNIT_PIVOT:"fsup",IOS_NEWS_FEED:"ios_news_feed",MTOUCH_NEWS_FEED:"mtouch_news_feed",ANDROID_NULL_STATE:"android_null_state",IOS_GRAPH_SEARCH_NULL_STATE:"ios_graph_search_null_state",MSITE_NEWS_NON_GS_NULL_STATE:"mnngns",MSITE_NEWS_NULL_STATE:"mnns",MSITE_LATEST_POSTS_TAB:"mlpt",WWW_NULL_STATE:"www_null_state",SEARCH_TRENDING_MODULE:"stm",IOS_TODAY_MAIN:"ios_today_main",IOS_TODAY_SEE_MORE:"ios_today_see_more",IOS_STORY_TOPIC_HEADER:"ios_story_topic_header",TOPIC_SHARE:"share",TOPIC_MOBILE_SHARE:"mobile_share"};},null);
__d('TrendingRHCLogger',['AsyncSignal','BanzaiScuba','CSS','Event','Parent','Run','TrendingRHCConfig','csx','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q,r,s,t,u,v,w,x,y=3,z=false;function aa(fa,ga,ha,ia){var ja=new i('trending_rhc',null,{sampleRate:n.sample_rate});ja.addNormal('country',u);ja.addNormal('post_search_trending_feeds',n.post_search_trending_feeds);ja.addNormal('event',ga);ja.addNormal('position',fa);ja.addNormal('qe_group',r);var ka=fa<=y?s:x;ja.addNormal('source',ka);ja.addNormVector('categories',ha);ja.addNormal('topic_id',ia);ja.post();}function ba(fa,ga){var ha=fa.getAttribute('data-position');if(!ha)return;var ia=fa.getAttribute('data-categories'),ja=ia?JSON.parse(ia):[],ka=fa.getAttribute('data-topicid');aa(ha,ga,ja,ka);}function ca(event){var fa=null,ga=event.getTarget(),ha=l.bySelector(event.getTarget(),"._2w2e");if(ha){ga=ha;}else if(!j.hasClass(ga,"_5my2")){fa=l.bySelector(ga,"._4_nl");ga=l.bySelector(ga,"._5my2");}if(!ga||fa||j.hasClass(event.getTarget(),"_19_3")||j.hasClass(event.getTarget(),"_4v8h"))return;ba(ga,'click');var ia=ga.getAttribute('data-position');if(ia==='seemore'||ia==='trendingheader')z=true;}function da(){if(!q)return;new h('/ajax/pubcontent/trending_rhc/log_hidden',{keys:JSON.stringify(q),source:x,scores:JSON.stringify(v),query_id:w}).send();q=null;}var ea={init:function(fa,ga){s=ga.source;r=ga.qe_group;u=ga.country;q=ga.hidden_keys;t=ga.query_id;v=ga.hidden_scores;var ha=k.listen(fa,'click',ca);m.onLeave(function(){ha.remove();});},initSeeMore:function(fa,ga,ha,ia,ja){q=ga;v=ha;w=ia;x=ja;var ka=k.listen(fa,'click',ca);if(z){da();}else z=false;m.onLeave(function(){ka.remove();});},logHovercardArticleClick:function(fa,ga){aa(fa,'hover_article_click',null,ga);},logHovercardFeedClick:function(fa,ga){aa(fa,'hover_feed_click',null,ga);},logHovercardShare:function(fa,ga){aa(fa,'topic_share',null,ga);},logImpression:function(fa){ba(fa,'imp');},getSource:function(){return s;},getQueryID:function(){return t;},getSeeMoreSource:function(){return x;},getSeeMoreQueryID:function(){return w;}};f.exports=ea;},null);
__d('TrendingHideReasons',['immutable','fbt'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=h.OrderedMap,k=j({5:i._("I want to see something else"),1:i._("I don't care about this"),2:i._("I keep seeing this"),3:i._("It's offensive or inappropriate"),4:i._("Other")});f.exports=k;},null);
__d('TrendingTopicHideMenu.react',['Image.react','ImageBlock.react','InputLabel.react','LeftRight.react','Link.react','React','TrendingHideReasons','XUIRadioInput.react','XUIText.react','cx','ix','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){'use strict';if(c.__markCompiled)c.__markCompiled();var t=m.PropTypes,u=m.createClass({displayName:'TrendingTopicHideMenu',propTypes:{topicId:t.number.isRequired,category:t.number.isRequired},render:function(){return (m.createElement(i,{className:"_4_nl",spacing:'none'},m.createElement(h,{className:"_19_0",src:r('/images/pubcontent/trending/grey_sparkline.png')}),m.createElement('div',null,this._renderTitle(),this._renderSubtitle(),this._renderPollSection())));},_renderTitle:function(){return (m.createElement(k,null,m.createElement(p,{weight:'bold'},s._("Topic Hidden")),m.createElement(l,{className:"_4_nn"},s._("Undo"))));},_renderSubtitle:function(){return (m.createElement('div',{className:"_3-95"},s._("We'll try not to show you this topic again.")));},_renderPollSection:function(){return (m.createElement('form',{action:'#',className:"_3-94"},m.createElement('div',{className:"_3-94"},s._("Why did you hide it?")),n.map(function(v,w){return (m.createElement(j,{key:w},m.createElement(o,{className:"_2p3m",name:'trending_hide_reason',value:w,'data-topicid':this.props.topicId}),m.createElement('label',null,v)));}.bind(this)).toArray()));}});f.exports=u;},null);
__d("TrendingCategoriesIconUnitCallback",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=null,i={register:function(j){h=j;},callback:function(j,k){h.setCategoryList(j,k);}};f.exports=i;},null);
__d("XPubcontentTrendingCategoriesFetchListController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pubcontent\/trending\/categories\/fetch_list\/",{category:{type:"Enum",required:true,enumType:0},source:{type:"String",required:true},topic_ids_seen:{type:"IntVector",required:true}});},null);
__d("XPubcontentTrendingCategoriesSaveSelectionController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pubcontent\/trending\/categories\/save_selection\/",{category:{type:"Enum",required:true,enumType:0}});},null);
__d("XPubcontentTrendingReplaceTrendsController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pubcontent\/trending\/trending_unit\/",{is_expanded:{type:"Bool",defaultValue:false}});},null);
__d('TrendingCategoriesIconUnit',['AsyncRequest','CSS','Event','TrendingCategoriesIconUnitCallback','XPubcontentTrendingCategoriesFetchListController','XPubcontentTrendingCategoriesSaveSelectionController','XPubcontentTrendingReplaceTrendsController','cx','tidyEvent'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();function q(r){'use strict';this.$TrendingCategoriesIconUnit1=r.categoryIconMap;this.$TrendingCategoriesIconUnit2=r.categoryListMap;this.$TrendingCategoriesIconUnit3=r.categoryHeaderMap;this.$TrendingCategoriesIconUnit4=r.loadingBar;this.$TrendingCategoriesIconUnit5=r.selectedCategoryId;this.$TrendingCategoriesIconUnit6=r.selectedCategoryId;this.$TrendingCategoriesIconUnit7=r.source;this.$TrendingCategoriesIconUnit8=r.hideSeeMore;this.$TrendingCategoriesIconUnit9=r.enableIconSeeMore;this.$TrendingCategoriesIconUnit10=r.rememberCategorySelection;this.$TrendingCategoriesIconUnit11=r.iconsAtTopDesign;this.$TrendingCategoriesIconUnit12=[];this.$TrendingCategoriesIconUnit13=this.$TrendingCategoriesIconUnit2[this.$TrendingCategoriesIconUnit5].getHeight();k.register(this);for(var s in this.$TrendingCategoriesIconUnit1)this.$TrendingCategoriesIconUnit14(this.$TrendingCategoriesIconUnit1[s]);this.$TrendingCategoriesIconUnit15(r.refreshSeconds,r.isExpanded);}q.prototype.setCategoryList=function(r,s){'use strict';this.$TrendingCategoriesIconUnit2[s]=r;if(s===this.$TrendingCategoriesIconUnit5){if(this.$TrendingCategoriesIconUnit4)i.hide(this.$TrendingCategoriesIconUnit4);this.$TrendingCategoriesIconUnit2[s].showItems();this.$TrendingCategoriesIconUnit13=this.$TrendingCategoriesIconUnit2[s].getHeight();}};q.prototype.$TrendingCategoriesIconUnit14=function(r){'use strict';var s=r.getCategoryId();p(j.listen(r.getRoot(),'click',function(){var t=s===this.$TrendingCategoriesIconUnit6&&this.$TrendingCategoriesIconUnit9;if(t){if(s===this.$TrendingCategoriesIconUnit5&&!this.$TrendingCategoriesIconUnit8)return;if(this.$TrendingCategoriesIconUnit8)i.removeClass(this.$TrendingCategoriesIconUnit1[s].getRoot(),"_tuc");this.$TrendingCategoriesIconUnit2[s].fetchExtraItems();}if(s===this.$TrendingCategoriesIconUnit5)return;this.$TrendingCategoriesIconUnit16(s);this.$TrendingCategoriesIconUnit1[this.$TrendingCategoriesIconUnit5].unselect();if(this.$TrendingCategoriesIconUnit2[this.$TrendingCategoriesIconUnit5]){this.$TrendingCategoriesIconUnit13=this.$TrendingCategoriesIconUnit2[this.$TrendingCategoriesIconUnit5].getHeight();this.$TrendingCategoriesIconUnit2[this.$TrendingCategoriesIconUnit5].hideItems();}if(!this.$TrendingCategoriesIconUnit11){i.hide(this.$TrendingCategoriesIconUnit3[this.$TrendingCategoriesIconUnit5]);i.show(this.$TrendingCategoriesIconUnit3[s]);}this.$TrendingCategoriesIconUnit1[s].select();this.$TrendingCategoriesIconUnit5=s;if(this.$TrendingCategoriesIconUnit2[s]){if(this.$TrendingCategoriesIconUnit4)i.hide(this.$TrendingCategoriesIconUnit4);this.$TrendingCategoriesIconUnit2[s].showItems();this.$TrendingCategoriesIconUnit13=this.$TrendingCategoriesIconUnit2[s].getHeight();return;}this.$TrendingCategoriesIconUnit4.style.height=this.$TrendingCategoriesIconUnit13;i.show(this.$TrendingCategoriesIconUnit4);if(this.$TrendingCategoriesIconUnit12[s])return;this.$TrendingCategoriesIconUnit12[s]=true;var u=this.$TrendingCategoriesIconUnit2[this.$TrendingCategoriesIconUnit6],v=u.getCategoryItemInfo(),w=l.getURIBuilder().setEnum('category',s).setString('source',this.$TrendingCategoriesIconUnit7).setIntVector('topic_ids_seen',v.visibleTopicIds).getURI();new h().setURI(w).send();}.bind(this)));};q.prototype.$TrendingCategoriesIconUnit15=function(r,s){'use strict';var t=r*1000;setTimeout(function(){var u=n.getURIBuilder().setBool('is_expanded',s).getURI();new h(u).send();},t);};q.prototype.$TrendingCategoriesIconUnit16=function(r){'use strict';if(!this.$TrendingCategoriesIconUnit10)return;var s=m.getURIBuilder().setEnum('category',r).getURI();new h().setURI(s).send();};f.exports=q;},null);
__d("XPubcontentTrendingCategoriesInsertItemController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pubcontent\/trending\/categories\/hide_options\/",{num_removed_topics:{type:"Int",defaultValue:0},trending_topic_id:{type:"Int",required:true},topic_ids:{type:"IntVector",defaultValue:[]},category:{type:"Enum",required:true,enumType:0}});},null);
__d("XPubcontentTrendingHideConfirmController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pubcontent\/trending\/hide_confirm\/",{hidden_topic_id:{type:"Int",required:true},position:{type:"Int",defaultValue:0},reason:{type:"Int",required:true},source:{type:"String"},trqid:{type:"Int",defaultValue:-1}});},null);
__d('TrendingCategoriesRHCHide',['AsyncRequest','CSS','DOM','DOMQuery','Event','Parent','React','ReactDOM','TrendingRHCLogger','TrendingTopicHideMenu.react','URI','XPubcontentTrendingCategoriesInsertItemController','XPubcontentTrendingHideConfirmController','csx','cx','tidyEvent'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){if(c.__markCompiled)c.__markCompiled();var x=[],y=[],z=false,aa=['webkitAnimationEnd','animationend','mozAnimationEnd','oAnimationEnd','MSAnimationEnd'];function ba(ea,fa){var ga=k.scry(ea,"._5my2"),ha=ga.filter(function(ja){var ka=Number(ja.getAttribute('data-position'));return ka>=fa;}),ia=[];ha.forEach(function(ja){var ka=Number(ja.getAttribute('data-position'));ja.setAttribute('data-position',ka-1);var la=k.scry(ja,"._7ge");la.forEach(function(ma){var na=new r(ma.getAttribute('href')).addQueryData('position',ka-1);ia.push({link:ma,uri:na.toString()});});});ia.forEach(function(ja){var ka=ja.link;ka.setAttribute('href',ja.uri);});}function ca(ea,fa,ga){var ha=k.find(ea,"^._2snq"),ia=k.find(ea,"^._5my2"),ja=j.create('div',{className:"_4_nj"}),ka=Number(ia.getAttribute('data-position'));ba(ha,ka);x[ga].showExtraItem();x[ga].removeItem(ia);j.insertBefore(ia,ja);aa.forEach(function(event){ja.addEventListener(event,function(){i.removeClass(ja,"_4_nj");});});var la=t.getURIBuilder().setInt('reason',ea.firstChild.value).setInt('hidden_topic_id',fa).setInt('position',ka);if(p.getSource())la.setString('source',p.getSource());if(p.getQueryID())la.setInt('trqid',p.getQueryID());var ma=la.getURI();new h().setURI(ma).setRelativeTo(ea).send();}var da={addCategoryList:function(ea,fa){x[fa]=ea;},confirmHide:function(ea,fa,ga){var ha=false;w(l.listen(ea,'click',function(){setTimeout(function(){if(ha)return;ha=true;ca(ea,fa,ga,false);},100);}));},onHideReasonClicked:function(ea,fa){var ga=k.find(ea,'input[name="trending_hide_reason"]'),ha=parseInt(ga.getAttribute('data-topicid'),10);if(y[ha])return;y[ha]=true;setTimeout(function(){ca(ea,ha,fa);y[ha]=false;},100);},listenForHide:function(ea,fa,ga){w(l.listen(ea,'click',function(){var ha=k.find(ea,"^._5my2"),ia=k.find(ha,"._4_nl"),ja=k.find(ha,"._4_nm");i.hide(ja);i.show(ia);if(!z){if(x[ga]==null)return;z=true;var ka=x[ga].getCategoryItemInfo(),la=ka.visibleTopicIds.concat(ka.hiddenTopicIds,ka.removedTopicIds),ma=ka.removedTopicIds.length,na=s.getURIBuilder().setInt('trending_topic_id',fa).setIntVector('topic_ids',la).setInt('num_removed_topics',ma).setEnum('category',ga).getURI();new h().setURI(na).setRelativeTo(ea).setHandler(function(){z=false;}).send();}}));},onHideClicked:function(ea,fa){var ga=parseInt(ea.getAttribute('data-topicid'),10),ha=k.find(ea,"^._5my2"),ia=j.scry(ha,"._4_nl"),ja=k.find(ha,"._4_nm");i.hide(ja);if(ia.length){ia.map(i.show);}else{var ka=j.create('div');o.render(n.createElement(q,{topicId:ga,category:fa}),ka);j.appendContent(ha,ka);}if(!z){if(x[fa]==null)return;z=true;var la=x[fa].getCategoryItemInfo(),ma=la.visibleTopicIds.concat(la.hiddenTopicIds,la.removedTopicIds),na=la.removedTopicIds.length,oa=s.getURIBuilder().setInt('trending_topic_id',ga).setIntVector('topic_ids',ma).setInt('num_removed_topics',na).setEnum('category',fa).getURI();new h().setURI(oa).setRelativeTo(ea).setHandler(function(){z=false;}).send();}},listenForUndo:function(ea){var fa=k.find(ea,"._4_nn");w(l.listen(fa,'click',function(){var ga=k.find(ea,"^._5my2 ._4_nm");i.hide(ea);i.show(ga);}));},onHideMenuUndoClicked:function(ea,fa){var ga=k.find(ea,"^._4_nl"),ha=k.find(ga,"^._5my2 ._4_nm");i.hide(ga);i.show(ha);},hideSeeMoreLink:function(ea,fa){var ga=x[fa].getCategoryItemInfo();if(ga.hiddenTopicIds.length!==0)return;var ha=m.bySelector(ea,"._5my7"),ia=k.scry(ha,"a._5my9");if(ia&&ia.length===1&&i.shown(ia[0]))i.addClass(ia[0],"_4_nk");}};f.exports=da;},null);
__d('TrendingCategoryCloseButton.react',['React','cx','fbt'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=h.createClass({displayName:'TrendingCategoryCloseButton',render:function(){var l=j._("Hide Trending Item");return (h.createElement('button',{disabled:this.props.reviewertool,title:l,'aria-label':l,type:'submit',value:'1',className:"_19_3"},h.createElement('span',{className:"_4v8h",'data-topicid':this.props.item_key})));}});f.exports=k;},null);
__d('TrendingCategoryIcon',['BanzaiLogger','CSS','TrendingEvent','cx'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();function l(m,n){'use strict';this.$TrendingCategoryIcon1=m;this.$TrendingCategoryIcon2=n.iconElement;this.$TrendingCategoryIcon3=n.nub;this.$TrendingCategoryIcon4=n.unselectedClass;this.$TrendingCategoryIcon5=n.selectedClass;this.$TrendingCategoryIcon6=n.categoryId;this.$TrendingCategoryIcon7=n.categoryLoggingOffset;this.$TrendingCategoryIcon8=n.queryId;this.$TrendingCategoryIcon9=n.source;}l.prototype.getRoot=function(){'use strict';return this.$TrendingCategoryIcon1;};l.prototype.getCategoryId=function(){'use strict';return this.$TrendingCategoryIcon6;};l.prototype.select=function(){'use strict';i.addClass(this.$TrendingCategoryIcon1,"_5nns");i.addClass(this.$TrendingCategoryIcon2,this.$TrendingCategoryIcon5);i.removeClass(this.$TrendingCategoryIcon2,this.$TrendingCategoryIcon4);i.show(this.$TrendingCategoryIcon3);this.$TrendingCategoryIcon10();};l.prototype.unselect=function(){'use strict';i.removeClass(this.$TrendingCategoryIcon1,"_5nns");i.addClass(this.$TrendingCategoryIcon2,this.$TrendingCategoryIcon4);i.removeClass(this.$TrendingCategoryIcon2,this.$TrendingCategoryIcon5);i.hide(this.$TrendingCategoryIcon3);};l.prototype.$TrendingCategoryIcon10=function(){'use strict';var m={trending_event:j.CATEGORY_HEADER_CLICKED,trending_location:this.$TrendingCategoryIcon9,trending_positions:[this.$TrendingCategoryIcon7],query_id:parseInt(this.$TrendingCategoryIcon8,10),tagids:[]};h.log('TrendingEventLoggerConfig',m);};f.exports=l;},null);
__d("XPubcontentTrendingCategoriesImpressionLoggingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pubcontent\/trending\/categories\/log_impression\/",{topic_ids_by_position:{type:"IntToIntMap",required:true},source:{type:"String",required:true},query_id:{type:"Int",required:true}});},null);
__d("XPubcontentTrendingCategoriesSeeMoreController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pubcontent\/trending\/categories\/see_more\/",{topic_ids_seen:{type:"IntVector",defaultValue:[]},num_topics_to_add:{type:"Int",required:true},num_removed_topics:{type:"Int",defaultValue:0},category:{type:"Enum",required:true,enumType:0}});},null);
__d('TrendingCategoryList',['AsyncRequest','CSS','DOM','Event','Parent','TrendingCategoriesRHCHide','TrendingLocation','XPubcontentTrendingCategoriesImpressionLoggingController','XPubcontentTrendingCategoriesSeeMoreController','csx','cx','getStyleProperty','tidyEvent'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u=['webkitAnimationEnd','animationend','mozAnimationEnd','oAnimationEnd','MSAnimationEnd'];function v(w,x,y){'use strict';this.$TrendingCategoryList1=w;this.$TrendingCategoryList2=x;this.$TrendingCategoryList3=y.category;this.$TrendingCategoryList4=y.rowsAfterSeeMore;this.$TrendingCategoryList5=y.source;this.$TrendingCategoryList6=y.queryId;this.$TrendingCategoryList7=false;m.addCategoryList(this,this.$TrendingCategoryList3);if(y.useDelegateListener)this.$TrendingCategoryList8();this.$TrendingCategoryList9();}v.prototype.showItems=function(){'use strict';i.show(this.$TrendingCategoryList1);var w=this.getCategoryItemInfo();this.$TrendingCategoryList10(w.visibleTopicIds,w.visiblePositions,this.$TrendingCategoryList5);};v.prototype.hideItems=function(){'use strict';i.hide(this.$TrendingCategoryList1);};v.prototype.getHeight=function(){'use strict';return s(this.$TrendingCategoryList1,'height');};v.prototype.getCategoryItemInfo=function(){'use strict';var w=[],x=[],y=[],z=[],aa=[];j.scry(this.$TrendingCategoryList1,"._5my2").forEach(function(ba){if(i.hasClass(ba,"_5my9"))return;var ca=Number(ba.getAttribute('data-topicid')),da=Number(ba.getAttribute('data-position'));if(i.hasClass(ba,"_338c")){aa.push(ca);}else if(i.hasClass(ba,"_5my1")){y.push(ca);z.push(da);}else{w.push(ca);x.push(da);}});return {visibleTopicIds:w,visiblePositions:x,hiddenTopicIds:y,hiddenPositions:z,removedTopicIds:aa};};v.prototype.showExtraItem=function(){'use strict';var w=j.scry(this.$TrendingCategoryList1,"._5my1");if(w.length===0)return;var x=Number.MAX_VALUE,y=null;w.forEach(function(z){var aa=Number(z.getAttribute('data-position'));if(aa<x){y=z;x=aa;}});i.removeClass(y,"_5my1");i.addClass(y,"_4_ni");i.show(y);u.forEach(function(event){y.addEventListener(event,function(){i.removeClass(y,"_4_ni");});});this.$TrendingCategoryList10([Number(y.getAttribute('data-topicid'))],[Number(y.getAttribute('data-position'))],n.WWW_HIDDEN_RHC_TRENDING);};v.prototype.removeItem=function(w){'use strict';i.addClass(w,"_338c");i.hide(w);};v.prototype.fetchExtraItems=function(){'use strict';if(this.$TrendingCategoryList7)return;this.$TrendingCategoryList7=true;if(this.$TrendingCategoryList2!==null)i.hide(this.$TrendingCategoryList2);var w=this.getCategoryItemInfo(),x=this.$TrendingCategoryList4-w.hiddenTopicIds.length;if(x<=0){this.$TrendingCategoryList11();return;}var y=j.find(this.$TrendingCategoryList1,"._30_w");i.show(y);var z=w.visibleTopicIds.concat(w.hiddenTopicIds,w.removedTopicIds),aa=p.getURIBuilder().setIntVector('topic_ids_seen',z).setInt('num_topics_to_add',x).setInt('num_removed_topics',w.removedTopicIds.length).setEnum('category',this.$TrendingCategoryList3).getURI();new h().setURI(aa).setRelativeTo(this.$TrendingCategoryList1).setHandler(function(ba){i.hide(y);this.$TrendingCategoryList11();}.bind(this)).send();};v.prototype.$TrendingCategoryList8=function(){'use strict';t(k.listen(this.$TrendingCategoryList1,'click',function(event){var w=event.getTarget();if(i.hasClass(w,"_19_3")){var x=j.find(w,"._4v8h");m.onHideClicked(x,this.$TrendingCategoryList3);return;}else if(i.hasClass(w,"_4v8h")){m.onHideClicked(w,this.$TrendingCategoryList3);return;}var y=l.bySelector(w,"._2p3m");if(y){m.onHideReasonClicked(y,this.$TrendingCategoryList3);return;}var z=l.bySelector(w,"._4_nn");if(z){m.onHideMenuUndoClicked(z,this.$TrendingCategoryList3);return;}}.bind(this)));};v.prototype.$TrendingCategoryList9=function(){'use strict';if(this.$TrendingCategoryList2==null)return;t(k.listen(this.$TrendingCategoryList2,'click',function(){i.hide(this.$TrendingCategoryList2);this.fetchExtraItems();}.bind(this)));};v.prototype.$TrendingCategoryList11=function(){'use strict';var w=j.scry(this.$TrendingCategoryList1,"._5my1");if(w.length===0)return;var x=Math.min(this.$TrendingCategoryList4,w.length),y=[],z=[];for(var aa=0;aa<x;aa++){i.show(w[aa]);i.removeClass(w[aa],"_5my1");y.push(Number(w[aa].getAttribute('data-topicid')));z.push(Number(w[aa].getAttribute('data-position')));}this.$TrendingCategoryList10(y,z,n.WWW_HIDDEN_RHC_TRENDING);};v.prototype.$TrendingCategoryList10=function(w,x,y){'use strict';if(w.length===0)return;var z={};for(var aa=0;aa<w.length;aa++)z[x[aa]]=w[aa];var ba=o.getURIBuilder().setIntToIntMap('topic_ids_by_position',z).setString('source',y).setInt('query_id',this.$TrendingCategoryList6).getURI();new h(ba).send();};f.exports=v;},null);