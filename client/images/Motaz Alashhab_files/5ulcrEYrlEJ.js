/*!CK:2144983497!*//*1456170327,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["edTtx"]); }

__d("PromptsInteractionsEventNames",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={OPEN_SELECTING_CONTENT:"open_selecting_content",OPEN_SUGGESTING_CONTENT:"open_suggesting_content",CLOSE_SUGGESTION:"close_suggestion",SELECT_SUGGESTION:"select_suggestion",CANCEL_COMPOSER:"cancel_composer",POST_PROMPT:"post_prompt",POST_WITHOUT_PROMPT:"post_without_prompt",IMPRESSION:"impression",SHOW_SUGGESTION:"show_suggestion",HIDE_SUGGESTION:"hide_suggestion",PROMPT_AVAILABLE:"prompt_available",PROMPT_NOT_CONSIDERED:"prompt_not_considered",DEIMPRESSION:"deimpression",CLICK_TAGGER:"og-tagger-click",UNDO_DISMISS:"undo_dismiss"};},null);
__d('ReactFeedComposerXPromptInteractionsModule',['ReactComposerEvents','PromptsInteractionsEventNames','Arbiter','Bootloader','CSS','Event','SubscriptionsHandler','csx','cx','requireWeak'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r={VISIBLE:'visible',HIDDEN:'hidden'};function s(t,u,v,w,x,y){'use strict';this.$ReactFeedComposerXPromptInteractionsModule2=y;this.$ReactFeedComposerXPromptInteractionsModule1=new n();this.$ReactFeedComposerXPromptInteractionsModule1.addSubscriptions(m.listen(w,'click',function(event){this.closePrompt(t,v);}.bind(this)),m.listen(v,'click',function(event){this.togglePrompt(t,v);}.bind(this)),m.listen(u,'click',function(event){this.$ReactFeedComposerXPromptInteractionsModule3(i.OPEN_SELECTING_CONTENT);if(x.profilePictureOverlayID){this.$ReactFeedComposerXPromptInteractionsModule4(x);return;}this.fillComposerTags(x);k.loadModules(["DOM","ReactComposerFeedXMinutiaeBootloadStore"],function(z,aa){aa.setMinutiaeData(x.taggerData);aa.setPromptData(y);l.hide(t);l.hide(v);var ba=z.scry(document,"img._3cr_")[0];if(ba)l.show(ba);});}.bind(this)),j.subscribeOnce(h.POST_SUCCEEDED+x.composerID,this.$ReactFeedComposerXPromptInteractionsModule5.bind(this)));}s.prototype.$ReactFeedComposerXPromptInteractionsModule4=function(t){'use strict';k.loadModules(["XProfilePictureOverlayAsyncDialogController","AsyncRequest"],function(u,v){var w=u.getURIBuilder().setInt('selected_page_id',t.profilePictureOverlayID).setStringToStringMap('prompt_data',this.$ReactFeedComposerXPromptInteractionsModule2).getURI();new v().setURI(w).send();}.bind(this));};s.prototype.fillComposerTags=function(t){'use strict';q('ReactComposerTaggerActions',function(u){q('ReactComposerTaggerType',function(v){if(t.taggerData[v.ACTIVITY])u.setTaggerData(t.composerID,v.ACTIVITY,t.taggerData[v.ACTIVITY]);if(t.taggerData[v.LOCATION])u.setTaggerData(t.composerID,v.LOCATION,t.taggerData[v.LOCATION]);j.inform(h.ACTIVATE_ATTACHMENT+t.composerID);});});};s.prototype.togglePrompt=function(t,u){'use strict';if(l.hasClass(t,"_3crz")){this.openPrompt(t,u);}else this.closePrompt(t,u);};s.prototype.closePrompt=function(t,u){'use strict';if(!l.hasClass(t,"_3crz")){l.addClass(t,"_3crz");l.addClass(u,"_3cr-");this.$ReactFeedComposerXPromptInteractionsModule3(i.IMPRESSION,r.HIDDEN);this.$ReactFeedComposerXPromptInteractionsModule3(i.HIDE_SUGGESTION);}};s.prototype.openPrompt=function(t,u){'use strict';l.removeClass(t,"_3crz");l.removeClass(u,"_3cr-");this.$ReactFeedComposerXPromptInteractionsModule3(i.IMPRESSION,r.VISIBLE);this.$ReactFeedComposerXPromptInteractionsModule3(i.SHOW_SUGGESTION);};s.prototype.$ReactFeedComposerXPromptInteractionsModule5=function(){'use strict';this.$ReactFeedComposerXPromptInteractionsModule1.release();q('ReactComposerFeedXMinutiaeBootloadStore',function(t){t.setPromptData(null);});};s.prototype.$ReactFeedComposerXPromptInteractionsModule3=function(t){var u=arguments.length<=1||arguments[1]===undefined?null:arguments[1];'use strict';k.loadModules(["XReactFeedComposerXPromptDismissController","AsyncRequest"],function(v,w){var x=v.getURIBuilder().getURI();new w().setURI(x).setData({user_action:t,prompt_id:this.$ReactFeedComposerXPromptInteractionsModule2.promptID,prompt_type:this.$ReactFeedComposerXPromptInteractionsModule2.promptType,prompt_tracking_string:this.$ReactFeedComposerXPromptInteractionsModule2.trackingString,prompt_state:u}).send();}.bind(this));};f.exports=s;},null);