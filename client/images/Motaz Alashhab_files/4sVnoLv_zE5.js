/*!CK:3742421073!*//*1456281317,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["4\/b5o"]); }

__d('MessengerTypeaheadUtils',['immutable','MercuryConfig','MercuryTypeaheadConstants','ReactDOM','fbt','mapObject'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';var n;if(c.__markCompiled)c.__markCompiled();var o=h.OrderedMap,p=[j.FRIEND_TYPE,j.FB4C_TYPE,j.THREAD_TYPE,j.PAGE_TYPE,j.NON_FRIEND_TYPE],q=(n={},n[j.FRIEND_TYPE]={header:''},n[j.FB4C_TYPE]={header:l._("Co-workers")},n[j.THREAD_TYPE]={header:l._("Group Conversations")},n[j.PAGE_TYPE]={header:l._("Businesses")},n[j.NON_FRIEND_TYPE]={header:l._("More People")},n),r={sortEntries:function(s,t){var u=[],v=[],w=[],x=[],y=[];s.forEach(function(z){switch(z.getType()){case j.FRIEND_TYPE:u.push(z);break;case j.FB4C_TYPE:v.push(z);break;case j.THREAD_TYPE:w.push(z);break;case j.PAGE_TYPE:case j.COMMERCE_PAGE_TYPE:y.push(z);break;case j.NON_FRIEND_TYPE:x.push(z);break;}});if(r._shouldHoistPages(t))return y.concat(u,v,w,x);return u.concat(v,w,y,x);},sortEntriesWithoutPages:function(s){var t=[],u=[],v=[],w=[];s.forEach(function(x){switch(x.getType()){case j.FRIEND_TYPE:t.push(x);break;case j.FB4C_TYPE:u.push(x);break;case j.THREAD_TYPE:v.push(x);break;case j.NON_FRIEND_TYPE:w.push(x);break;}});return t.concat(u,v,w);},sortEntriesWithoutGroupsOrViewer:function(s,t){var u=[],v=[],w=[];s.forEach(function(x){if(x.getUniqueID()===t)return;switch(x.getType()){case j.FRIEND_TYPE:u.push(x);break;case j.FB4C_TYPE:v.push(x);break;case j.NON_FRIEND_TYPE:w.push(x);break;}});return u.concat(v,w);},buildListSections:function(s,t){var u=arguments.length<=2||arguments[2]===undefined?p:arguments[2];if(!s.length)return o();var v=m(q,function(w){return babelHelpers['extends']({},w,{entries:[]});});v[j.COMMERCE_PAGE_TYPE]=v[j.PAGE_TYPE];if(r._shouldHoistPages(t)){v[j.FRIEND_TYPE].header=l._("Friends");u=[].concat(u);u.splice(u.indexOf(j.PAGE_TYPE));u.unshift(j.PAGE_TYPE);}s.forEach(function(w){var x=w.getType();if(v[x])v[x].entries.push(w);});return o(u.filter(function(w){return v[w].entries.length;}).map(function(w){return [v[w].header,v[w].entries];}));},scrollEntryIntoView:function(s,t){var u=k.findDOMNode(t),v=t.getScrollTop(),w=s.offsetTop-v,x=u.offsetHeight-s.offsetHeight;if(w>=x){t.scrollToPosition(v+w-x);}else if(w<0)t.scrollToPosition(v+w);},_shouldHoistPages:function(s){if(!s)return false;return !!(i.HoistAgentsKeywords&&i.HoistAgentsKeywords.indexOf(s.toLowerCase().trim())!==-1);}};f.exports=r;},null);
__d('ShareDialogAudienceTypeahead.react',['Grid.react','React','XUITypeahead.react','cx','emptyFunction','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=h.GridItem,o=i.PropTypes,p=i.createClass({displayName:'ShareDialogAudienceTypeahead',propTypes:{searchSource:o.object.isRequired,userId:o.string,prefix:o.string,onClear:o.func,onChange:o.func},getDefaultProps:function(){return {onClear:l,onChange:l};},getInitialState:function(){return {query:'',selectedEntry:null};},_onBlur:function(){if(!this.state.selectedEntry||this.state.selectedEntry.getTitle()!==this.state.query)this._clearSelection();},_clearSelection:function(){this.setState({query:'',selectedEntry:null});this.props.onClear();},render:function(){var q=this.props,r=q.className,s=babelHelpers.objectWithoutProperties(q,['className']),t=!!this.state.selectedEntry,u={};if(this.props.userId)u[this.props.userId]=true;var v=this.props.prefix?i.createElement('span',{className:"_2qx7"},this.props.prefix):i.createElement('noscript',null),w=this.props.prefix?"_2qx6":null;return (i.createElement(h,{className:w,cols:2},i.createElement(n,{key:'prefix',className:"_1ho1"},v),i.createElement(n,{key:'suffix',className:"_1xk6"},i.createElement(j,babelHelpers['extends']({},s,{className:m(r,"_39y9"+(t?' '+"_39ya":'')),excludedEntries:u,onChange:this._onChange,onClear:this._onClear,onBlur:this._onBlur,onSelectAttempt:this._onSelect,queryString:this.state.query,searchSource:this.props.searchSource,focusedOnInit:true,showEntriesOnFocus:false,clearable:true,selectedEntry:this.state.selectedEntry,tallInput:true})))));},_onSelect:function(q){this.setState({query:q.getTitle(),selectedEntry:q});this.props.onChange(q);},_onChange:function(event){var q=event.target.value;if(this.state.selectedEntry&&this.state.selectedEntry.getTitle()!==q){this.setState({query:q,selectedEntry:null});}else this.setState({query:q});},_onClear:function(){this.setState({query:'',selectedEntry:null});this.props.onClear();}});f.exports=p;},null);
__d('ShareDialogGroupAudience.react',['ReactComposerContextMixin','React','ShareDialogAudienceTypeahead.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=i.PropTypes,n=i.createClass({displayName:'ShareDialogGroupAudience',mixins:[h],propTypes:{customModules:m.arrayOf(m.func),searchSource:m.object.isRequired,onClear:m.func,onChange:m.func.isRequired,onSelect:m.func},getInitialState:function(){return {query:'',selectedEntry:null};},_onGroupChange:function(o){var p=o.getAuxiliaryData(),q=p.isForSaleGroup;this.setState({isForSaleGroupSelected:q});this.props.onChange([o.getUniqueID()]);},render:function(){var o=this.props.customModules?this.props.customModules:[],p=l._("Group:");return (i.createElement('div',null,i.createElement(j,babelHelpers['extends']({},this.props,{onChange:this._onGroupChange,prefix:p,showPhoto:true,name:'audience_group',inputID:'audience_group',className:"_2n3i",placeholder:l._("Group Name")})),o.map(function(q,r){return (i.createElement(q,babelHelpers['extends']({key:r},this.props,this.state)));}.bind(this))));}});f.exports=n;},null);
__d('ShareDialogMessageAudience.react',['ChatSearchSource','Grid.react','MercuryTypeaheadConstants','MessengerTypeaheadUtils','React','ShareDialogTypeaheadView.react','XUITokenizer.react','XUITokenizerToken.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r=i.GridItem,s=l.PropTypes,t=l.createClass({displayName:'ShareDialogMessageAudience',propTypes:{userId:s.string,onClear:s.func,onChange:s.func,messageTargets:s.array},componentWillMount:function(){this._searchSource=new h({queryRequests:[{uri:'/ajax/mercury/composer_query.php'}]});},getInitialState:function(){return {entries:[]};},render:function(){var u=this._shouldBeDisabled();return (l.createElement(i,{className:"_2qx6",cols:2},l.createElement(r,{className:"_1ho1",key:'prefix'},l.createElement('span',{className:"_2qx7"},q._("To:"))),l.createElement(r,{className:"_1xk6",key:'suffix'},l.createElement(n,babelHelpers['extends']({},this.props,{className:"_39y9"+(' '+"_42z0")+(u?' '+"_39ya":''),placeholder:q._("Names"),name:'audience_message',inputID:'audience_message',value:this.state.entries,focusedOnInit:true,selectOnTab:true,showEntriesOnFocus:false,entries:this.state.entries,searchSource:this._searchSource,onRemoveEntryAttempt:this._onRemoveEntryAttempt,onAddEntryAttempt:this._onAddEntryAttempt,disabled:u,presenter:{ViewRenderer:m,TokenRenderer:o,useLayer:true,sortEntries:this._sortEntries}})))));},componentDidMount:function(){var u=this.props.messageTargets;if(u)for(var v=0;v<u.length;++v)if(u[v])this._onAddEntryAttempt(u[v]);},_sortEntries:function(u){if(this.state.entries.length)return k.sortEntriesWithoutGroupsOrViewer(u,this.props.userId);return k.sortEntriesWithoutPages(u);},_shouldBeDisabled:function(){var u=this.state.entries;return u.length===1&&u[0].getType()===j.THREAD_TYPE;},_onAddEntryAttempt:function(u){var v=u.getUniqueID(),w=this.state.entries,x=w.some(function(y){if(y.getUniqueID()===v)return true;});if(x)return;w.push(u);this.props.onChange(w.map(function(y){return y.getUniqueID();}));this.setState({entries:w});},_onRemoveEntryAttempt:function(u){var v=u.getUniqueID(),w=this.state.entries,x=w.some(function(y){if(y.getUniqueID()===v)return true;});if(x)w.splice(w.indexOf(u),1);this.props.onChange(w.map(function(y){return y.getUniqueID();}));if(w.length===0)this.props.onClear();this.setState({entries:w});}});f.exports=t;},null);
__d('ShareDialogPageAudience.react',['React','Image.react','LeftRight.react','ShareActorSelector.react','XUISelector.react','cx','emptyFunction','fbt','getObjectValues'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=h.PropTypes,r=l.Option,s=h.createClass({displayName:'ShareDialogPageAudience',propTypes:{pagesSource:q.object.isRequired,onClear:q.func,onSelect:q.func,defaultPageID:q.string},getInitialState:function(){var t=this.props.defaultPageID?this.props.defaultPageID:p(this.props.pagesSource)[0].id;return {selectedPageID:t,selectedActorID:t,onClear:n,onChange:n};},render:function(){if(!this.props.pagesSource)return h.createElement('span',null);var t=p(this.props.pagesSource).map(function(u){return (h.createElement(r,{key:u.id,value:u.id,icon:h.createElement(i,{src:u.pic,height:15,width:15})},u.name));});return (h.createElement('div',{className:"_15u8"},h.createElement(j,null,h.createElement(l,{className:"_15u9",name:'audience_page',inputID:'audience_page',maxheight:150,value:this.state.selectedPageID,defaultValue:this.state.selectedPageID,onChange:function(u){this.setState({selectedPageID:u.value});this.props.onChange([{pageId:u.value,actorId:this.state.selectedActorID}]);}.bind(this)},t),h.createElement('span',null,h.createElement('strong',{className:"_15ua"},o._("Posting as"),' '),h.createElement(k,{name:'audience_page_identity',onChange:function(u){this.setState({selectedActorID:u.value});this.props.onChange([{pageId:this.state.selectedPageID,actorId:u.value}]);}.bind(this),targetID:this.state.selectedPageID})))));}});f.exports=s;},null);
__d('ShareDialogPersonAudience.react',['React','SearchableEntry','ShareDialogAudienceTypeahead.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=h.PropTypes,n=h.createClass({displayName:'ShareDialogPersonAudience',propTypes:{searchSource:m.object.isRequired,userId:m.string,onClear:m.func,onChange:m.func.isRequired,onSelect:m.func},_onPersonChange:function(o){this.props.onChange([o.getUniqueID()]);},render:function(){var o=l._("Friend:");return (h.createElement(j,babelHelpers['extends']({},this.props,{prefix:o,searchSource:this.props.searchSource,className:"_4heg",name:'friendTarget',inputID:'friendTarget',clearable:true,placeholder:l._("Friend's Name"),onChange:this._onPersonChange})));}});f.exports=n;},null);