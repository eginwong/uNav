/*!CK:3952107352!*//*1456170311,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["PFFbd"]); }

__d('StickyController',['CSS','Event','Style','Vector','queryThenMutateDOM'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();function m(n,o,p,q){'use strict';this._element=n;this._marginTop=o;this._onchange=p;this._proxy=q||n.parentNode;this._boundQueryOnScroll=this.shouldFix.bind(this);this._boundMutateOnScroll=this._mutateOnScroll.bind(this);}m.prototype.handleScroll=function(){'use strict';l(this._boundQueryOnScroll,this._boundMutateOnScroll);};m.prototype.shouldFix=function(){'use strict';return k.getElementPosition(this._proxy,'viewport').y<=this._marginTop;};m.prototype._mutateOnScroll=function(){'use strict';var n=this.shouldFix();if(this.isFixed()!==n){j.set(this._element,'top',n?this._marginTop+'px':'');h.conditionClass(this._element,'fixed_elem',n);this._onchange&&this._onchange(n);}};m.prototype.start=function(){'use strict';if(this._event)return;this._event=i.listen(window,'scroll',this.handleScroll.bind(this));setTimeout(this.handleScroll.bind(this),0);};m.prototype.stop=function(){'use strict';this._event&&this._event.remove();this._event=null;};m.prototype.isFixed=function(){'use strict';return h.hasClass(this._element,'fixed_elem');};f.exports=m;},null);
__d('TimelineSideAds',['AdsMouseStateStore','Animation','Arbiter','CSS','DOM','EgoAdsObjectSet','Event','ProfileTabUtils','StickyController','TimelineAdsConfig','TimelineComponentKeys','TimelineConstants','TimelineController','UIPagelet','UITinyViewportAction','URI','Vector','csx','cx','debounce','ge','getOrCreateDOMID','queryThenMutateDOM'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da){if(c.__markCompiled)c.__markCompiled();var ea=75,fa='data-height',ga=h.STATES,ha=30000,ia=0,ja=false,ka,la,ma,na,oa,pa,qa=new m(),ra,sa,ta,ua=Infinity,va=false,wa=5,xa,ya,za,ab,bb,cb,db,eb,fb,gb,hb,ib=false,jb=[],kb;function lb(kc,lc,mc){var nc=0;if(lc)nc+=lc.getHeight();if(!qb()&&!nc)return;kc-=nc;var oc=0;for(var pc=0;pc<mc;pc++)oc+=zb(pc);if(lc)if(kc<oc){kc+=lc.fold(oc-kc);}else if(kc>oc)kc-=lc.unfold(kc-oc);return kc;}function mb(){var kc=la.cloneNode(true);kc.id='';var lc=new m();lc.init(l.scry(kc,'div.ego_unit'));var mc=true;lc.forEach(function(nc){if(mc){mc=false;}else l.remove(nc);});k.addClass(kc,'fixed_elem');return kc;}function nb(){pa=undefined;if(!o.tabHasScrubber(ra)){rb(wa);ub();}else if(ab){sb(la,false);var kc=bb;bb&&l.remove(bb);bb=mb();if(kc)fc();rb(ya);ub();if(!ta){var lc=t.getCurrentScrubber();if(lc)ec(lc.getRoot(),lc.getOffset());}ta&&ta.start();}else jc.adjustAdsToFit();}function ob(){if(bb){l.remove(bb);bb=null;}if(ta){ta.stop();ta=null;}var kc=o.tabHasScrubber(ra);k.conditionClass(la,'fixed_elem',!ab&&(qb()||kc));k.conditionClass(la,"_31wm",!kc);k.conditionClass(la,"_5r9k",kc);}function pb(kc){var lc=x.getViewportDimensions().y,mc=t.getCurrentScrubber(),nc=mc?mc.getOffset():s.SCRUBBER_DEFAULT_OFFSET,oc=lc-nc-ea;if(mc||qb())return lb(oc,mc,kc);}function qb(){return o.tabHasFixedAds(ra);}function rb(kc){oa=Math.min(kc,qa.getCount());qa.forEach(function(lc,mc){sb(lc,mc>=oa);});sb(la,oa===0);}function sb(kc,lc){k.conditionClass(kc,"_22r",lc);kc.setAttribute('aria-hidden',lc?'true':'false');}function tb(kc){var lc=l.find(qa.getUnit(kc),"div._4u8"),mc=lc.getAttribute('data-ad');return JSON.parse(mc).adid;}function ub(){wb();vb();}function vb(){var kc;if(pa!==undefined){kc=qa.getHoldoutAdIDsForSpace(pa,ac);}else kc=qa.getHoldoutAdIDsForNumAds(oa);if(kc)kc.forEach(xb);}function wb(){if(!cb)return;for(var kc=oa-1;kc>=0;--kc){if(ta&&ta.isFixed()&&(kc!==0||bb&&!k.shown(bb)))continue;var lc=tb(kc);if(!cb[lc])return;xb(lc);}}function xb(kc){if(!cb[kc])return;var lc=l.create('iframe',{src:new w('/ai.php').addQueryData({aed:cb[kc]}),width:0,height:0,frameborder:0,scrolling:'no',className:'fbEmuTracking'});lc.setAttribute('aria-hidden','true');l.appendContent(la,lc);delete cb[kc];}function yb(kc){var lc=0;for(var mc=0;mc<wa;mc++){var nc=zb(mc);kc-=nc;if(kc>0&&nc>0)lc++;}return lc;}function zb(kc){var lc=qa.getUnit(kc);if(!lc)return 0;return ac(lc);}function ac(kc){if(!kc.getAttribute(fa))bc(kc);return parseInt(kc.getAttribute(fa),10);}function bc(kc){kc.setAttribute(fa,kc.offsetHeight);}function cc(){for(var kc=0;kc<qa.getCount();kc++){var lc=qa.getUnit(kc);if(!lc)continue;bc(lc);}}function dc(){var kc=l.scry(la,'div.ego_unit');qa.init(kc);var lc=kc.length;if(!lc)return;k.addClass(qa.getUnit(0),'ego_unit_no_top_border');nb();setTimeout(function(){kc.forEach(bc);jc.adjustAdsToFit();ua=Date.now();},0);}function ec(kc,lc){ta=new p(kc,lc,function(mc){if(mc){fc();}else{l.remove(bb);ub();}});if(bb)ta.start();}function fc(){l.insertAfter(la,bb);gc();}function gc(){k.conditionShow(bb,zb(0)<=pb(1)&&!v.isTiny());}function hc(){if(sa){var kc=ba(ma);l.find(kc,'.ego_column').appendChild(sa);}if(q.fade)new i(ba(ma)).from('opacity',0).to('opacity',1).duration(600).go();}function ic(kc){return !!l.scry(kc,'div.fbEmuHidePoll')[0];}var jc={init:function(kc,lc,mc){if(ja)return;wa=mc.max_ads;ka=mc.refresh_delay;ha=mc.refresh_threshold;xa=mc.min_ads;ya=mc.min_ads_short;ja=true;na=lc;la=kc;h.updateRhcID(ca(la));db=j.subscribe(['UFI/CommentAddedActive','UFI/CommentDeletedActive','UFI/LikeActive','Curation/Action','ProfileBrowser/LoadMoreContent','Ads/NewContentDisplayed'],jc.loadAdsIfEnoughTimePassed);eb=j.subscribe('TimelineSideAds/refresh',jc.forceReloadAds);fb=j.subscribe('ProfileQuestionAnswered',jc.forceReloadAdsWithCallback);gb=j.subscribe('Ads/displayPoll',jc.displayAdsPoll);hb=j.subscribe('Ads/hidePoll',jc.hideAdsPoll);kb=aa(jc.loadAdsIfEnoughTimePassed,ka,this,true);if(mc.mouse_move){jb.push(n.listen(window,'mousemove',kb));jb.push(n.listen(window,'scroll',kb));jb.push(n.listen(window,'resize',kb));jb.push(n.listen(la,'mouseenter',function(){va=true;}));jb.push(n.listen(la,'mouseleave',function(){va=false;}));}t.register(r.ADS,jc);},setShortMode:function(kc){ab=kc;},start:function(kc){cb=kc;za=null;dc();},updateCurrentKey:function(kc){if(kc==ra)return;ra=kc;ob();},loadAds:function(kc){if(za)return;ua=Infinity;za=u.loadFromEndpoint('WebEgoPane',la.id,{pid:33,data:[na,'timeline_'+kc,ab?ya:wa,++ia,false]},{crossPage:true,bundle:false,handler:hc});},registerScrubber:function(kc){if(ab)ec(kc.getRoot(),kc.getOffset());!za&&jc.adjustAdsToFit();},intentShown:function(){if(!q.stateRefresh)return false;switch(h.getState()){case ga.HOVER:case ga.INTENT:default:return true;case ga.NO_INTENT:return false;case ga.STATIONARY:return !q.refreshOnStationary;}},loadAdsIfEnoughTimePassed:function(){if(ha&&Date.now()-ua>=ha&&!v.isTiny()&&(!ta||ta.isFixed())&&(!cb||!cb[tb(0)])&&!jc.intentShown()&&!va)jc.loadAds(ra);jc.adjustAdsToFit();},forceReloadAdsWithCallback:function(kc,lc){sa=lc;ma=ca(la);jc.loadAds(ra);},forceReloadAds:function(){jc.loadAds(ra);},displayAdsPoll:function(){var kc=-1;for(var lc=0;lc<qa.getCount();lc++){var mc=qa.getUnit(lc);if(!mc)continue;if(kc===-1&&ic(mc))kc=lc;bc(mc);}jc.adjustAdsToFit();if(kc===oa&&kc>0){sb(qa.getUnit(kc-1),true);sb(qa.getUnit(kc),false);}},hideAdsPoll:function(){cc();jc.adjustAdsToFit();},adjustAdsToFit:function(){if(!la||ib)return;ib=true;if(ab){if(ta&&bb){ta.handleScroll();if(ta.isFixed()){k.conditionShow(bb,zb(0)<=pb(1)&&!v.isTiny());}else rb(ya);ub();}ib=false;return;}var kc=0;da(function(){var lc=pb(xa);if(lc!==undefined){pa=lc;kc=yb(lc);}},function(){if(kc>0){rb(kc);ub();ib=false;}});},reset:function(){ta&&ta.stop();za&&za.cancel();qa=new m();la=null;ta=null;za=null;ia=0;ab=null;bb=null;ra=null;ua=Infinity;ja=false;db&&j.unsubscribe(db);db=null;eb&&j.unsubscribe(eb);eb=null;fb&&j.unsubscribe(fb);gb&&j.unsubscribe(gb);hb&&j.unsubscribe(hb);fb=null;va=false;jb.forEach(function(kc){kc.remove();});jb=[];kb&&kb.reset();}};f.exports=b.TimelineSideAds||jc;},null);
__d('TimelineStickyHeader',['Animation','Arbiter','BlueBar','Bootloader','CSS','DOM','ProfileTabConst','ProfileTabUtils','ProfileTimelineUILogger','Style','TimelineComponentKeys','TimelineController','Vector','ViewportBounds','UITinyViewportAction','ge','getOrCreateDOMID','queryThenMutateDOM'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){if(c.__markCompiled)c.__markCompiled();var z=200,aa=358,ba=48,ca=false,da=false,ea,fa,ga,ha,ia=false,ja=0,ka,la,ma={},na={VISIBLE:'TimelineStickyHeader/visible',ADJUST_WIDTH:'TimelineStickyHeader/adjustWidth',init:function(oa){if(ca)return;ca=true;ea=oa;fa=m.find(oa,'div.name');ga=m.find(oa,'div.actions');da=l.hasClass(oa,'fbTimelineStickyHeaderVisible');var pa,qa=false,ra=true;y(function(){var sa=j.getBar();if(sa.offsetTop&&!w('page_admin_panel')&&s.getCurrentKey()!==n.TIMELINE){pa=t.tElementDimensions(sa).y;qa=true;}ra=j.hasFixedBlueBar();},function(){if(qa){k.loadModules(["StickyController"],function(sa){new sa(oa,pa).start();});}else l.addClass(oa,'fixed_elem');if(!ra)l.addClass(oa,'fbTimelineStickyHeaderNonFixedBlueBar');na.updateBounds(da);s.register(r.STICKY_HEADER,na);},'TimelineStickyHeader/init');},reset:function(){ca=false;da=false;ea=null;fa=null;ga=null;ma={};ha.remove();ha=null;},handleTabChange:function(oa){ja=o.isTimelineTab(oa)?aa-ba:0;if(!o.tabHasStickyHeader(oa)){this.toggle(false,function(){return l.hide(ea);});return;}l.show(ea);},updateBounds:function(){y(function(){ka=ea.offsetTop;la=ea.scrollHeight;},function(){ha=u.addTop(function(){return da?ka+la:0;});},'TimelineStickyHeader/init');},check:function(oa){if(v.isTiny()){this.toggle(false);return;}var pa=ja===0||oa>=ja;this.toggle(pa);},toggle:function(oa,pa){if(oa===da){pa&&pa();return;}var qa=oa?ka-la:ka,ra=oa?ka:ka-la;q.set(ea,'top',qa+'px');l.addClass(ea,'fbTimelineStickyHeaderAnimating');var sa=x(ea);ma[sa]&&ma[sa].stop();ma[sa]=new h(ea).from('top',qa).to('top',ra).duration(z).ondone(function(){ma[sa]=null;if(oa&&!ia){p.logStickyHeaderImpression();ia=true;}y(null,function(){l.conditionClass(ea,'fbTimelineStickyHeaderHidden',!oa);ea.setAttribute('aria-hidden',oa?'false':'true');l.removeClass(ea,'fbTimelineStickyHeaderAnimating');q.set(ea,'top','');na.updateBounds();i.inform(na.VISIBLE,oa);pa&&pa();});}).go();da=oa;if(da)na.adjustWidth();},adjustWidth:function(){i.inform(na.ADJUST_WIDTH,fa,i.BEHAVIOR_STATE);},getRoot:function(){return ea;},setActions:function(oa){if(ca&&oa){m.setContent(ga,oa);ga=oa;}}};f.exports=b.TimelineStickyHeader||na;},null);
__d('ButtonGroup',['CSS','DataStore','Parent'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k='firstItem',l='lastItem';function m(r,s){var t=j.byClass(r,s);if(!t)throw new Error('invalid use case');return t;}function n(r){return h.shown(r)&&Array.from(r.childNodes).some(h.shown);}function o(r){var s,t,u;Array.from(r.childNodes).forEach(function(v){u=n(v);h.removeClass(v,k);h.removeClass(v,l);h.conditionShow(v,u);if(u){s=s||v;t=v;}});s&&h.addClass(s,k);t&&h.addClass(t,l);h.conditionShow(r,s);}function p(r,s){var t=m(s,'uiButtonGroupItem');r(t);o(t.parentNode);}function q(r){'use strict';this._root=m(r,'uiButtonGroup');i.set(this._root,'ButtonGroup',this);o(this._root);}q.getInstance=function(r){'use strict';var s=m(r,'uiButtonGroup'),t=i.get(s,'ButtonGroup');return t||new q(s);};Object.assign(q.prototype,{hideItem:p.bind(null,h.hide),showItem:p.bind(null,h.show),toggleItem:p.bind(null,h.toggle)});f.exports=q;},null);
__d('TimelineStickyHeaderNav',['Arbiter','BlueBar','ButtonGroup','CSS','DataStore','DateStrings','DOM','Event','Parent','ProfileTimelineUILogger','SelectorDeprecated','Style','SubscriptionsHandler','TimelineComponentKeys','TimelineConstants','TimelineController','UITinyViewportAction','URI','Vector','queryThenMutateDOM'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){if(c.__markCompiled)c.__markCompiled();var ba=false,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na={},oa={},pa=[],qa=false,ra=[],sa=[],ta,ua=80;function va(){var hb=r.getSelectorMenu(ga);ta.addSubscriptions(o.listen(hb,'click',wa),h.subscribe(v.SECTION_REGISTERED,ya));}function wa(event){var hb=p.byTag(event.getTarget(),'a'),ib=hb&&l.get(hb,'key');if(ib){w.stickyHeaderNavWasClicked(ib);w.navigateToSection(ib);q.logStickyHeaderScrubberClick(ib);event.prevent();}}function xa(hb){if(la===hb&&ja[hb]&&!da.custom_subsection_menu){cb(hb);}else za();w.adjustStickyHeaderWidth();}function ya(hb,ib){var jb=ib.section,kb=jb.getParentKey();if(!kb)return;var lb=bb(kb),mb=w.getCurrentScrubber(),nb=jb.getScrubberKey(),ob=mb?mb.getLabelForSubnav(kb,nb):ob=ab(nb);if(ob){ja[kb]=true;db(lb,{key:nb,label:ob});xa(kb);}}function za(){if(ea)ea.hideItem(ha);}function ab(hb){var ib=hb.split('_');return m.getMonthName(parseInt(ib.pop(),10));}function bb(hb){var ib=ia[hb];if(!ib){ib=ia[hb]=ha.cloneNode(true);var jb=n.scry(ib,'li.activityLog a')[0];if(jb)jb.href=new y(jb.href).addQueryData({key:hb});ta.addSubscriptions(o.listen(ib,'click',wa));}return ib;}function cb(hb){var ib=bb(hb);n.insertAfter(ha,ib);k.hide(ha);for(var jb in ia){var kb=ia[jb];k.conditionShow(kb,kb===ib);}if(ea)ea.showItem(ha);}function db(hb,ib){var jb=n.create('a',{href:'#',rel:'ignore',className:'itemAnchor',tabIndex:0},n.create('span',{className:'itemLabel fsm'},ib.label));jb.setAttribute('data-key',ib.key);jb.setAttribute('aria-checked',false);var kb=n.create('li',{className:'uiMenuItem uiMenuItemRadio uiSelectorOption'},jb);kb.setAttribute('data-label',ib.label);var lb=n.find(hb,'ul.uiMenuInner'),mb=n.create('option',{value:ib.key},ib.label),nb=n.find(hb,'select');if(ib.key==='recent'){n.prependContent(lb,kb);n.insertAfter(nb.options[0],mb);}else{n.appendContent(lb,kb);n.appendContent(nb,mb);}}function eb(hb,ib){var jb=n.scry(hb,'li.uiMenuItem');if(!jb)return;for(var kb=0;kb<jb.length;kb++){var lb=jb[kb];if(k.hasClass(lb,ib)||lb.firstChild.getAttribute('data-key')==ib){n.remove(lb);break;}}var mb=n.find(hb,'select'),nb=n.scry(mb,'option');for(kb=0;kb<nb.length;kb++)if(nb[kb].value===ib){n.remove(nb[kb]);return;}}function fb(event){var hb=p.byClass(event.target,'itemAnchor');if(hb){var ib=l.get(hb,'tab-key');if(ib)q.logStickyHeaderNavItemClick(ib);}}var gb={init:function(hb,ib){if(ba)return;ba=true;ca=hb;da=ib||{};fa=n.find(ca,'div.pageMenu');ga=n.find(ca,'div.sectionMenu');ha=n.find(ca,'div.subsectionMenu');ma=n.find(fa,'li.uiMenuSeparator');ea=j.getInstance(fa);ta=new t();ia={};ja={};ka={};gb.adjustMenuHeights();va();w.register(u.STICKY_HEADER_NAV,gb);sa.forEach(function(jb){jb();});ta.addSubscriptions(o.listen(fa,'click',fb));},reset:function(){ba=false;da={};pa=[];na={};oa={};qa=false;ra=[];ca=null;fa=null;ga=null;ha=null;ma=null;ia={};ja={};ka={};ta.release();},addTimePeriod:function(hb){var ib=w.getCurrentScrubber();if(!ib)return;var jb=ib.getLabelForNav(hb);if(!jb)return;db(ga,{key:hb,label:jb});var kb=n.find(ga,'ul.uiMenuInner');if(hb==='recent'||kb.children.length<2)r.setSelected(ga,hb,true);},updateSection:function(hb,ib){if(ib){var jb=bb(hb);r.setSelected(jb,ib);}else ka[hb]=true;la=hb;r.setSelected(ga,hb,true);xa(hb);},adjustMenuHeights:function(){var hb='';aa(function(){if(!x.isTiny()){hb=z.getViewportDimensions().y-z.getElementDimensions(i.getBar()).y-ua;hb+='px';}},function(){[fa,ga].map(function(ib){if(ib)s.set(n.find(ib,'ul.uiMenuInner'),'maxHeight',hb);});});},initPageMenu:function(hb,ib){if(!ba){sa.push(gb.initPageMenu.bind(null,hb,ib));return;}function jb(kb,lb){kb.forEach(function(mb){var nb=oa[mb]=n.create('li');k.hide(nb);lb?n.insertBefore(ma,nb):n.appendContent(n.find(fa,'ul.uiMenuInner'),nb);});}jb(hb,true);jb(ib,false);na.info=n.scry(fa,'li')[0];pa=ib;qa=true;if(ra.length)ra.forEach(function(kb){gb.registerPageMenuItem(kb.key,kb.item);});},registerPageMenuItem:function(hb,ib){if(!qa){ra.push({key:hb,item:ib});return;}if(oa[hb]){n.replace(oa[hb],ib);na[hb]=ib;delete oa[hb];if(pa.indexOf(hb)>=0)k.show(ma);}},removeTimePeriod:function(hb){eb(ga,hb);},hideSectionMenu:function(){if(ba)k.hide(ga);}};f.exports=gb;},null);
__d('ButtonGroupMonitor',['ContextualDialog','ContextualLayer','CSS','Layer','Parent','SelectorDeprecated','DataStore'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();function o(p,q){var r=l.byClass(p,'bg_stat_elem')||l.byClass(p,'uiButtonGroup');if(!r&&q)r=n.get(q,'toggleElement',null);if(r){q&&n.set(q,'toggleElement',r);j.toggleClass(r,'uiButtonGroupActive');}}k.subscribe(['hide','show'],function(p,q){if(q instanceof i||q instanceof h)o(q.getCausalElement(),q);});m.subscribe(['close','open'],function(p,q){o(q.selector);});},null);